<!DOCTYPE html>
<html>

<head>
    <link rel="icon"
        href="http://www.freeiconspng.com/uploads/burn-burning-fire-flame-heat-icon--icon-search-engine-20.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>Friend Finder</title>
</head>


<body>

    <div class="container">
        <div class="page-header">
            <h1 style="font-size: 45px;"><span class="glyphicon glyphicon-fire" style="color: #e21e90;"></span> Friend
                Finder</h1>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><strong>Please provide the following information as honestly as possible with complete candor.</strong></h3>
            </div>
            <div class="panel-body">
                <h4>Your Full Name</h4>
                <div class="input-group">
                    <input id="formName" class="form-control" type="text" name="name" placeholder="John Smith">
                    <span class="input-group-addon">(Required)</span>
                </div>
                <br>
                <h4>Link to a Photo Image</h4>
                <div class="input-group">
                    <input id="formImage" class="form-control" type="text" name="name"
                        placeholder="http://yourphotolink.com.jpg/">
                    <span class="input-group-addon">(Required)</span>
                </div>
            </div>
        </div>


        <!-- *-----------------Statements Div--------------* -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><strong>Truths</strong></h3>
            </div>
            <div class="panel-body">

                <!-- Q1 -->
                <h4><strong>Statement 1</strong></h4>
                <h5>Everyone deserves the same base level respect as I believe I deserve.</h5>
                <select data-placeholder="" class="chosen-select" id="Q1">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q2 -->
                <h4><strong>Statement 2</strong></h4>
                <h5>Mistakes are a valuable exposure of truth.</h5>
                <select data-placeholder="" class="chosen-select" id="Q2">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q3 -->
                <h4><strong>Statement 3</strong></h4>
                <h5>Music can occur at random, and doesn't always have to be conscious.</h5>
                <select data-placeholder="" class="chosen-select" id="Q3">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q4 -->
                <h4><strong>Statement 4</strong></h4>
                <h5>Art is what Artists do.</h5>
                <select data-placeholder="" class="chosen-select" id="Q4">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q5 -->
                <h4><strong>Statement 5</strong></h4>
                <h5>Struggle is the foundation of experience.</h5>
                <select data-placeholder="" class="chosen-select" id="Q5">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q6 -->
                <h4><strong>Statement 6</strong></h4>
                <h5>Do, or do not. But first, try.</h5>
                <select data-placeholder="" class="chosen-select" id="Q6">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q7 -->
                <h4><strong>Statement 7</strong></h4>
                <h5>DON'T PANIC!!</h5>
                <select data-placeholder="" class="chosen-select" id="Q7">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q8 -->
                <h4><strong>Statement 8</strong></h4>
                <h5>RUSH is the epitome of rock music.</h5>
                <select data-placeholder="" class="chosen-select" id="Q8">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q9 -->
                <h4><strong>Statement 9</strong></h4>
                <h5>Good and Bad are constructs that don't exsist outside the human experience.</h5>
                <select data-placeholder="" class="chosen-select" id="Q9">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <!-- Q10 -->
                <h4><strong>Statement 10</strong></h4>
                <h5>Humour is a smooth path to enlightenment.</h5>
                <select data-placeholder="" class="chosen-select" id="Q10">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>

        <!-- Submit Button -->
        <button id="submitButton" type="submit" class="btn btn-md btn-danger btn-block">
            <h4><span class="glyphicon glyphicon-send"></span> Submit</h4>
        </button>
        <br>
        <footer class="footer">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/mc180g/friendfinder"
                    target="_blank">GitHub Repo</a> | <a href="/">Home</a></p>
        </footer>

        <div id="resultsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">

                    <!-- Close Button -->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h2 class="modal-title"><strong>This is who you should be talking to.</strong></h2>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchName"></h2>
                        <img id="matchImg" src="" alt="Image Not Found" style="max-width: 350px;">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

    <script>

        var allFieldsCompleted;

        $(document).ready(function () {

            $('#submitButton').on('click', function () {

                checkIfComplete(function () {

                    if (allFieldsCompleted) {
                        collectInputs();
                    }
                    else {
                        alert('Please complete all fields before submitting!');
                    }

                });
            });
        });

        function checkIfComplete(callback) {

            // Check through all the questions 
            var questionsCompleted;
            $('.chosen-select').each(function () {
                if ($(this).val() == "") {
                    questionsCompleted = false;
                }
            })

                .promise().done(function () {

                    if (questionsCompleted == false) {
                        allFieldsCompleted = false;
                    }
                   else if ($('#formName').val().trim() == "") {
                        allFieldsCompleted = false;
                    }
                    else if ($('#formImage').val().trim() == "") {
                        allFieldsCompleted = false;
                    }
                    else {
                        allFieldsCompleted = true;
                    }
                    callback();
                });
        };

        // New Friend
        function collectInputs() {

            var newFriend = {
                name: $('#formName').val().trim(),
                photo: $('#formImage').val().trim(),
                scores: []
            };

            var scoresArray = [];
            $('.chosen-select').each(function () {
                scoresArray.push(parseInt($(this).val()));
            });

                $('div').promise().done(function () {
                    newFriend.scores = scoresArray;

                    var currentURL = window.location.origin;
                    $.post(currentURL + "/api/friends", newFriend, function (data) {
                        $('#matchName').text(data.name);
                        $('#matchImg').attr('src', data.photo);
                        $("#resultsModal").modal('toggle');
                    });
                });
        };
    </script>
</body>
</html>
